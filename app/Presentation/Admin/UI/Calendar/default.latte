{var $css = 'calendar'}
{var $js = 'calendar'}
{block content}

    <div id="adminCalendar"
         class="admin-calendar"
         data-month="{$currentMonth|date:'Y-m-01'}"
         data-events="{=json_encode($eventsByDate)}">

        {* LEV√Å STRANA ‚Äì mƒõs√≠ƒçn√≠ kalend√°≈ô *}
    <div class="admin-calendar__left">
                <div class="admin-calendar__header">
                    <button type="button" class="admin-calendar__nav" data-calendar-prev>
                        ‚Üê
                    </button>

                    <div class="admin-calendar__month" data-calendar-label>
                        <!-- sem dopln√≠ JS (nap≈ô. prosinec 2025) -->
                    </div>

                    <button type="button" class="admin-calendar__nav" data-calendar-next>
                        ‚Üí
                    </button>
                </div>

                <div class="admin-calendar__weekdays">
                    <span>Po</span>
                    <span>√öt</span>
                    <span>St</span>
                    <span>ƒåt</span>
                    <span>P√°</span>
                    <span>So</span>
                    <span>Ne</span>
                </div>

                <div class="admin-calendar__grid" data-calendar-grid>
                    <!-- generuje JS -->
                </div>
    </div>

    {* PRAV√Å STRANA ‚Äì detail dne *}
        <div class="admin-calendar__right">
            <h2 class="admin-calendar-detail__date" data-calendar-detail-date>
                <!-- sem dopln√≠ JS (nap≈ô. 8. prosince 2025) -->
            </h2>

            <div class="admin-calendar-detail__content" data-calendar-detail-list>
                <p class="admin-calendar-detail__empty">
                    ≈Ω√°dn√© v√Ωlety na tento den.
                </p>
            </div>
        </div>
    </div>

    {if $showDetailModal && $detailReservation}
        <div class="reservations-modal-backdrop">
            <div class="reservations-modal reservations-modal--detail">
                <div class="reservations-modal__header">
                    <h2>Detail rezervace</h2>
                    <a n:href="this" class="reservations-modal__close">√ó</a>
                </div>

                <div class="reservation-detail">

                    <section class="reservation-detail__section">
                        <h3>Z√°kazn√≠k</h3>

                        <div class="reservation-detail__row">
                            <div class="reservation-detail__field">
                                <div class="reservation-detail__label">Jm√©no:</div>
                                <div class="reservation-detail__value">
                                    {$detailReservation->customer_name}
                                </div>
                            </div>

                            <div class="reservation-detail__field">
                                <div class="reservation-detail__label">Email:</div>
                                <div class="reservation-detail__value">
                                    {$detailReservation->customer_email}
                                </div>
                            </div>
                        </div>

                        <div class="reservation-detail__row">
                            <div class="reservation-detail__field">
                                <div class="reservation-detail__label">Telefon:</div>
                                <div class="reservation-detail__value">
                                    {$detailReservation->customer_phone}
                                </div>
                            </div>

                            <div class="reservation-detail__field">
                                <div class="reservation-detail__label">Poƒçet osob:</div>
                                <div class="reservation-detail__value">
                                    {$detailReservation->guests}
                                </div>
                            </div>
                        </div>

                        <div class="reservation-detail__row">
                            <div class="reservation-detail__field">
                                <div class="reservation-detail__label">M√≠sto vyzvednut√≠:</div>
                                <div class="reservation-detail__value">
                                    {$detailReservation->pickup_point}
                                </div>
                            </div>

                            <div class="reservation-detail__field">
                                <div class="reservation-detail__label">Pozn√°mka:</div>
                                <div class="reservation-detail__value">
                                    {$detailReservation->notes}
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="reservation-detail__section">
                        <h3>V√Ωlet</h3>

                        <div class="reservation-detail__row">
                            <div class="reservation-detail__field reservation-detail__field--full">
                                <div class="reservation-detail__label">N√°zev:</div>
                                <div class="reservation-detail__value">
                                    <a n:href=":Front:Excursion:default $detailReservation->trip->id"
                                            target="_blank"
                                            class="reservation-detail__trip-link">
                                        {$detailReservation->trip->title}
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="reservation-detail__row">
                            <div class="reservation-detail__field">
                                <div class="reservation-detail__label">Lokace:</div>
                                <div class="reservation-detail__value">
                                    {$detailReservation->trip->location}
                                </div>
                            </div>

                            <div class="reservation-detail__field">
                                <div class="reservation-detail__label">D√©lka:</div>
                                <div class="reservation-detail__value">
                                    {$detailReservation->trip->duration}
                                </div>
                            </div>
                        </div>

                        <div class="reservation-detail__row">
                            <div class="reservation-detail__field">
                                <div class="reservation-detail__label">Cena:</div>
                                <div class="reservation-detail__value">
                                    {$detailReservation->trip->price|number:0,',',' '} USD
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="reservation-detail__section">
                        <h3>Rezervace</h3>

                        <div class="reservation-detail__row">
                            <div class="reservation-detail__field">
                                <div class="reservation-detail__label">Datum:</div>
                                <div class="reservation-detail__value">
                                    {$detailReservation->date|date:'j. n. Y'}
                                </div>
                            </div>

                            <div class="reservation-detail__field">
                                <div class="reservation-detail__label">Status:</div>
                                <div class="reservation-detail__value">
                                <span class="reservation-status reservation-status--{$detailReservation->status}">
                                    {if $detailReservation->status === 'confirm'}
                                        Potvrzeno
                                    {elseif $detailReservation->status === 'canceled'}
                                        Zru≈°eno
                                    {else}
                                        ƒåek√°
                                    {/if}
                                </span>
                                </div>
                            </div>
                        </div>

                        <div class="reservation-detail__row">
                            <div class="reservation-detail__field reservation-detail__field--full">
                                <div class="reservation-detail__label">Vytvo≈ôeno:</div>
                                <div class="reservation-detail__value">
                                    {$detailReservation->created_at|date:'j. n. Y, H:i'}
                                </div>
                            </div>
                        </div>
                    </section>

                </div>
            </div>
        </div>
    {/if}
    {if $showTransferDetailModal && $detailTransfer}
        <div class="tdm-backdrop" data-modal="transfer-detail">
            <div class="tdm-modal" role="dialog" aria-modal="true" aria-label="Detail rezervace transferu">

                <div class="tdm-header">
                    <h2 class="tdm-title">Detail rezervace transferu</h2>
                    <a n:href="this" class="tdm-close" aria-label="Zav≈ô√≠t" data-modal-close>√ó</a>
                </div>

                <div class="tdm-body">
                    <div class="tdm-topgrid">
                        <div class="tdm-block">
                            <div class="tdm-label">Z√°kazn√≠k</div>
                            <div class="tdm-strong">{$detailTransfer->customer_name}</div>
                        </div>

                        <div class="tdm-block tdm-block--right">
                            <div class="tdm-label">Stav</div>
                            <span class="tdm-badge tdm-badge--{$detailTransfer->status}">
              {if $detailTransfer->status === 'confirm'}Potvrzeno
              {elseif $detailTransfer->status === 'canceled'}Zru≈°eno
              {else}ƒåek√°{/if}
            </span>
                        </div>

                        <div class="tdm-contact">
                            <span class="tdm-ico" aria-hidden="true">‚úâÔ∏è</span>
                            <a href="mailto:{$detailTransfer->customer_email}" class="tdm-link">{$detailTransfer->customer_email}</a>
                        </div>

                        <div class="tdm-contact">
                            <span class="tdm-ico" aria-hidden="true">üìû</span>
                            <a href="tel:{$detailTransfer->customer_phone}" class="tdm-link">{$detailTransfer->customer_phone}</a>
                        </div>
                    </div>

                    <hr class="tdm-sep">

                    <div class="tdm-meta">
                        <div class="tdm-meta-item"><span class="tdm-ico">üìÖ</span>
                            <span>{$detailTransfer->pickup_date|date:'j. n. Y'}</span>
                        </div>
                        <div class="tdm-meta-item"><span class="tdm-ico">üïí</span>
                            <span>{$detailTransfer->pickup_time->format('%H:%I')}</span>
                        </div>
                        <div class="tdm-meta-item"><span class="tdm-ico">üë•</span>
                            <span>{$detailTransfer->passagers} pasa≈æ√©r≈Ø</span>
                        </div>
                    </div>

                    <hr class="tdm-sep">

                    <div class="tdm-section">
                        <div class="tdm-label">Trasa</div>
                        <div class="tdm-route">
                            <div class="tdm-route-row">
                                <div class="tdm-route-k">Z:</div>
                                <div class="tdm-route-v">{$detailTransfer->pickup_location}</div>
                            </div>
                            <div class="tdm-route-row">
                                <div class="tdm-route-k">Do:</div>
                                <div class="tdm-route-v">{$detailTransfer->dropoff_location}</div>
                            </div>
                        </div>
                    </div>

                    <div class="tdm-footer">
                        Vytvo≈ôeno: {$detailTransfer->created_at|date:'j. n. Y H:i'}
                    </div>
                </div>
            </div>
        </div>
    {/if}


{/block}
